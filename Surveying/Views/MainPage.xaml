<?xml version="1.0" encoding="utf-8"?>
<ContentPage 
        xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
        xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
        xmlns:syncfusion="clr-namespace:Syncfusion.Maui.DataGrid;assembly=Syncfusion.Maui.DataGrid"
        xmlns:buttons="clr-namespace:Syncfusion.Maui.Buttons;assembly=Syncfusion.Maui.Buttons"
        xmlns:editors="clr-namespace:Syncfusion.Maui.Inputs;assembly=Syncfusion.Maui.Inputs"
        xmlns:inputLayout="clr-namespace:Syncfusion.Maui.Core;assembly=Syncfusion.Maui.Core"
        xmlns:local="clr-namespace:Surveying.ViewModels"
        x:Class="Surveying.Views.MainPage"
        Title="Survey List">


        <ContentPage.BindingContext>
            <local:SurveyListViewModel/>
        </ContentPage.BindingContext>

        <ContentPage.Content>
            <Grid>

            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
        
                <ColumnDefinition Width="*" />
    
            </Grid.ColumnDefinitions>
            <VerticalStackLayout Grid.Column="0" Padding="10" Spacing="10">


                <HorizontalStackLayout Padding="10" Spacing="10" VerticalOptions="Center">
                    <Button x:Name="addSurveyButton" Text="Add Survey" Clicked="OnAddSurveyClicked"/>
                    <SearchBar x:Name="searchBar"
                     Placeholder="Search..."
                     Text="{Binding SearchText, Mode=TwoWay}"
                     HorizontalOptions="EndAndExpand" />
                </HorizontalStackLayout>

                <syncfusion:SfDataGrid x:Name="dataGrid"
                                   Grid.Column="0"
                                   ItemsSource="{Binding FilteredSurveyList}"
                                   AllowGroupExpandCollapse="True"
                                   SelectionMode="Single"
                                   CellTapped="DataGrid_CellTapped"
                                   ColumnWidthMode="Fill"
                                   RowHeight="40"
                                   AutoGenerateColumnsMode="None"
                                   AllowEditing="True"
                                   MaximumHeightRequest="1200">
                    
                    <syncfusion:SfDataGrid.GroupColumnDescriptions>
                        <syncfusion:GroupColumnDescription ColumnName="OrderNumber"/>
                    </syncfusion:SfDataGrid.GroupColumnDescriptions>

                    <syncfusion:SfDataGrid.Columns>
                
                    <syncfusion:DataGridTextColumn HeaderText="Principal" MappingName="PrincipalName" />
                    <syncfusion:DataGridTextColumn HeaderText="Surveyor" MappingName="Surveyor" />
                    <syncfusion:DataGridTextColumn HeaderText="Tank No." MappingName="ContNumber" />
                    <syncfusion:DataGridTextColumn HeaderText="Condition" MappingName="Condition" />
                    <syncfusion:DataGridTextColumn MappingName="Status" HeaderText="C|R|P|S" />
                </syncfusion:SfDataGrid.Columns>
            </syncfusion:SfDataGrid>

            </VerticalStackLayout>
                
            <VerticalStackLayout Grid.Column="1" Padding="20" Spacing="15">
                <Label Text="Details" FontAttributes="Bold" FontSize="24" HorizontalOptions="Center" />

                <HorizontalStackLayout Spacing="10" VerticalOptions="Center">
                    <Label Text="Tank No:" FontAttributes="Bold" WidthRequest="100" VerticalOptions="Center" />
                    <Label Text="{Binding SelectedSurvey.ContNumber}" VerticalOptions="Center" />
                    <Button Text="TestCleaning" Clicked="SfButton_Clicked" VerticalOptions="Center" />
                </HorizontalStackLayout>

                <HorizontalStackLayout Spacing="10" VerticalOptions="Center">
                    
                    <Label Text="Condition:" FontAttributes="Bold" WidthRequest="100" VerticalOptions="Center" />

                    <Label Text="{Binding SelectedSurvey.Condition}" VerticalOptions="Center" />

                    <Button Text="TestRepair" Clicked="SfButton_Clicked_1" VerticalOptions="Center" />
                    
                </HorizontalStackLayout>

                <HorizontalStackLayout Spacing="10" VerticalOptions="Center">
                    <Label Text="Surveyor:" FontAttributes="Bold" WidthRequest="100" VerticalOptions="Center" />
                    <Label Text="{Binding SelectedSurvey.Surveyor}" VerticalOptions="Center" />
                    <Button Text="TestPeriodic" Clicked="SfButton_Clicked_2" VerticalOptions="Center" />
                </HorizontalStackLayout>

                <HorizontalStackLayout Spacing="10" VerticalOptions="Center">
                    <Label Text="OrderDate:" FontAttributes="Bold" WidthRequest="100" VerticalOptions="Center" />
                    <Label Text="{Binding SelectedSurvey.OrderDate, StringFormat='{}{0:dd/MM/yyyy}'}" VerticalOptions="Center" />
                    <Button Text="TestSurvey" Clicked="SfButton_Clicked_3" VerticalOptions="Center" />
                </HorizontalStackLayout>

                <HorizontalStackLayout Spacing="10" VerticalOptions="Center">
                    <Label Text="SurveyDate:" FontAttributes="Bold" WidthRequest="100" VerticalOptions="Center" />
                    <Label Text="{Binding SelectedSurvey.SurveyDate, StringFormat='{}{0:dd/MM/yyyy}'}" VerticalOptions="Center" />
                </HorizontalStackLayout>

                <HorizontalStackLayout Spacing="10" VerticalOptions="Center">
                    <Label Text="PickupDate:" FontAttributes="Bold" WidthRequest="100" VerticalOptions="Center" />
                    <Label Text="{Binding SelectedSurvey.PickupDate, StringFormat='{}{0:dd/MM/yyyy}'}" VerticalOptions="Center" />
                </HorizontalStackLayout>

                <HorizontalStackLayout Spacing="10" VerticalOptions="Center">
                    <Label Text="Shipper:" FontAttributes="Bold" WidthRequest="100" VerticalOptions="Center" />
                    <Label Text="{Binding SelectedSurvey.ShipperName, StringFormat='{}{0:dd/MM/yyyy}'}" VerticalOptions="Center" />
                </HorizontalStackLayout>
            </VerticalStackLayout>




            </Grid>
        </ContentPage.Content>
    </ContentPage>
